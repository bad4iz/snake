var snake=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u={POINT:20,FIELD_WIDTH:Math.floor(document.documentElement.clientWidth/20),FIELD_HEIGHT:Math.floor(document.documentElement.clientHeight/20),LEFT:37,UP:38,RIGHT:39,DOWN:40,START_DIRECTION:39,DEFAULT_COLOR:"#222",FOOD_COLOR:"#090",POISON_COLOR:"#900",START_SNAKE_X:10,START_SNAKE_Y:10,START_SNAKE_SIZE:6,GAME_OVER:!1,SHOW_DELAY:100,getRandom:function(t){return Math.round(Math.random()*t)}},c=function(){function t(){a(this,t),this.canvasElement=document.createElement("canvas"),this.canvasElement.id="snake_canvas",document.body.appendChild(this.canvasElement),this.canvasElement.width=u.FIELD_WIDTH*u.POINT,this.canvasElement.height=u.FIELD_HEIGHT*u.POINT,this.canvasElement.style.position="fixed",this.canvasElement.style.top="0",this.canvasElement.style.left="0"}return o(t,[{key:"context",value:function(t){return this.canvasElement.getContext(t)}}]),t}(),h=function(){function t(){a(this,t)}return o(t,[{key:"go",value:function(){var t=(new c).context("2d"),e=new O,n=[],i=new l(e,n);i.paint(t),addEventListener("keydown",function(t){i.setDirection(t.keyCode)}),setInterval(function(){u.GAME_OVER||(i.move(t),e.isEaten()&&(n.push(new y(t)),e.next(t)))},u.SHOW_DELAY+100)}}]),t}(),f=function(){function t(e,n){a(this,t),this.setXY(e,n),this.color=u.DEFAULT_COLOR,this.graphics={}}return o(t,[{key:"paint",value:function(t){this.graphics=t,t.beginPath(),t.fillStyle=this.color,t.fillRect(this.x,this.y,u.POINT,u.POINT)}},{key:"isYou",value:function(e,n){if(this.x==e&&this.y==n)return this instanceof t}},{key:"setXY",value:function(t,e){this.x=t,this.y=e}},{key:"clear",value:function(){this.graphics.clearRect(this.x,this.y,u.POINT,u.POINT)}},{key:"y",set:function(t){this._y=t},get:function(){return this._y}},{key:"x",set:function(t){this._x=t},get:function(){return this._x}}]),t}(),l=function(){function t(e,n){a(this,t);var i=void 0,o=u.START_SNAKE_X,r=u.START_SNAKE_Y;for(this.length=u.START_SNAKE_SIZE,this.snake=[],this.direction=u.START_DIRECTION,this.graphics={},this.food=e,this.poisons=n,i=0;i<this.length;i+=1){var s=new f((o-i)*u.POINT,r);this.snake.push(s)}}return o(t,[{key:"paint",value:function(t){this.snake.forEach(function(e){return e.paint(t)})}},{key:"setDirection",value:function(t){t>=u.LEFT&&t<=u.DOWN&&2!=Math.abs(this.direction-t)&&(this.direction=t)}},{key:"move",value:function(t){this.graphics=t;var e=this.snake[0].x,n=this.snake[0].y,o=this.getDirection(e,n),r=i(o,2);e=r[0],n=r[1],u.GAME_OVER=this.isInsideSnake(e,n)||this.isInsidePoison(e,n),this.food.isYou(e,n)?this.food.eat():this.removeTail(),this.snake.unshift(new f(e,n)),this.paint(this.graphics)}},{key:"removeTail",value:function(){var t=this.snake.length-1;this.snake[t].clear(),this.snake.pop(t)}},{key:"isInsideSnake",value:function(t,e){var n=!1;return this.snake.forEach(function(i){i.isYou(t,e)&&(n=!0)}),n}},{key:"isInsidePoison",value:function(t,e){var n=!1;return this.poisons.forEach(function(i){i.isYou(t,e)&&(n=!0)}),n}},{key:"getDirection",value:function(t,e){return this.direction==u.LEFT&&(t-=u.POINT),this.direction==u.RIGHT&&(t+=u.POINT),this.direction==u.UP&&(e-=u.POINT),this.direction==u.DOWN&&(e+=u.POINT),t>u.FIELD_WIDTH*u.POINT&&(t=0),t<0&&(t=u.FIELD_WIDTH*u.POINT),e>u.FIELD_HEIGHT*u.POINT&&(e=0),e<0&&(e=u.FIELD_HEIGHT*u.POINT),[t,e]}}]),t}(),O=function(t){function e(){a(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,-100,-100));return t.color=u.FOOD_COLOR,t}return s(e,f),o(e,[{key:"eat",value:function(){this.clear(),this.setXY(-100,-100)}},{key:"isEaten",value:function(){return-100==this.x}},{key:"next",value:function(t){var e=u.getRandom(u.FIELD_WIDTH)*u.POINT,n=u.getRandom(u.FIELD_HEIGHT)*u.POINT;this.setXY(e,n),this.paint(t)}}]),e}(),y=function(t){function e(t){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.color=u.POISON_COLOR,n.next(t),n}return s(e,O),e}();(new h).go()}]);